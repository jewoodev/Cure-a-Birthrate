# < 작업 과정 >

1. **데이터 수집 및 전처리 (preprocessing)**

2. **데이터 탐색 (EDA)**

      **1) 전국 데이터 프레임 & 광역자치단체별 데이터프레임**


      **2) 다중회귀이므로 공산성 확인**

      (1) 상관관계 분석 (전국, 행정구역별)

           상관계수가 0.85 이상인 설명변수들은 모형에 포함할 한 개의 대표 변수를 선별하거나,
           상관성을 줄이기 위하여 설명변수들을 변수 변환하기

           * 제외할 독립변수

              - 근린공원수 : 유의미한 상관관계가 나타나지 않음
              - 대형마트 수 : 분산도가 높고 영향도 적음
              - 학원수, 종합체육시설 : EDA 과정에서 음의 영향이 컸고 논문에서의 결과를 보니 상관계수가 음수이고 P-value 값이 약 0.5로 높음
              - 총 아파트 매매 : 집 구매 목적이 다르기 때문
              - 재정자립도 : 데이터가 적어 유의미한 결과를 나타내지 못할 것 같아 제외

           * 그외 : 남성육아휴직, GGI

              - 지금 현재 수집된 데이터로는 남성육아휴직은 증가하고 있지만 출산율 증가에 영향을 주고 있다고 보기 어려움. 그러나 해외 성공사례와는 다른 결과로 인해 확인하고자 독립변수에 추가

           * 변수 변환

              - 이혼건수 —> 이혼율로 변경 : 혼인건수 대비 이혼건수로 설정하여 진행
              - 대졸여성 2006-2007 결측치 대체 : 시대적 반영을 위해 --> 2008-2021 대졸 평균 증가율 대신 2008-2009 증가율로 2006-2007에 넣을 것
              - 영유아 1인당 보육시설 수 —> 2006 - 2007년의 결측값은 2008-2009년의 증가비율로 설정


      (2) 특성 중요도 파악

      (3) 집단화 (행정구역별)

           행정구역별로 진행 시, 지역간 출산율 비교 및 지역 차이 줄이는 모델 구현을 위해 
           행정적인 지역구분 이외에 별도로 
           각 출산력 측정 변수를 대상으로 통계적인 군집이 나타나지 않는지 확인 필요

           * 진행 방법
           - k-means clustering과 hierarchical clustering 사용 —> 가장 모형 설명력이 높은 군집 찾기 
           - 행정구역별로 유사한 경향을 나타내는 집단을 묶고 그 효과를 반영하기 위 해 집단화 (clustering) 과정 실시 
           - 이를 추후에 모형 평가 시 통계적 분류의 근거로 활용할 수 있음.

            => 효과 : 출산력의 결정모형을 만드는데 있어서 가장 최적(best fitting)의 모형 을 만들기 위한 과정

      **3) 결측값 대체**

      값이 없는 년도의 독립변수 중

      - 결측율이 지나치게 높은(30% 이상) 독립변수 : 결측값 대체 없이 원자료로 진행 (값을 0으로 두고)
      - 결측율이 낮은 독립변수 : 결측값 대체
           ⇒ 결측율 대체로 인하여 발생하는 편의(bias)를 최소화하기 위함


3. **여러 모델을 통해**

      0) 모델 3개 진행

        - 전국 : 연도별 1개, 선정한 독립변수 중 월별 모음 데이터 1개
        - 지역 : 출산율 높은 지역(세종), 낮은 지역(서울) 비교 (월별)
        - 세종과 서울 모델 각각 만들어 비교

      1) 학습, 예측, 성능 평가

      - 다중선형회귀 
      - K폴드 교차 검증 수행
      - 규제있는 선형회귀 (릿지, 랏쏘, 엘라스틱넷, 그리드서치cv)
      - 앙상블(보팅, 배깅, 부스팅)
      - 트리도 회귀모델이 있음 (앙상블 - 결정트리 regresser, 앙상블 regresser)

      2) 독립변수가 여러 개일 때, 모델의 성능을 시각화하려면 실제값과 예측값의 분포차이를 그린다
      3) 최적의 모델 확인